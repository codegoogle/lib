package com.facebook.ads.redexgen.X;

import android.annotation.SuppressLint;
import android.content.Context;
import android.graphics.Bitmap;
import android.util.Log;
import androidx.annotation.Nullable;
import com.p7700g.p99005.aa;
import com.p7700g.p99005.bx;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.util.Arrays;
import java.util.Collections;
import java.util.HashMap;
import java.util.Map;
import java.util.concurrent.Semaphore;
import org.xbill.DNS.Flags;
import org.xbill.DNS.WKSRecord;

@SuppressLint({"BadMethodUse-java.lang.String.length"})
/* renamed from: com.facebook.ads.redexgen.X.Qs  reason: case insensitive filesystem */
/* loaded from: assets/audience_network.dex */
public final class C0938Qs implements AnonymousClass00 {
    public static byte[] A09;
    public static String[] A0A;
    public static final String A0B;
    public final int A00;
    public final int A01;
    public final AnonymousClass08 A02;
    public final C0M A04;
    public final C8H A05;
    public final boolean A08;
    public final Map<String, File> A06 = Collections.synchronizedMap(new HashMap());
    public final Map<String, Semaphore> A07 = new HashMap();
    public final C0A A03 = new C0A();

    public static String A02(int i, int i2, int i3) {
        byte[] copyOfRange = Arrays.copyOfRange(A09, i, i + i2);
        for (int i4 = 0; i4 < copyOfRange.length; i4++) {
            int i5 = copyOfRange[i4] - i3;
            String[] strArr = A0A;
            if (strArr[5].length() == strArr[7].length()) {
                throw new RuntimeException();
            }
            String[] strArr2 = A0A;
            strArr2[5] = "m9U6X0moZlc";
            strArr2[7] = "IfCNkNm6kG";
            copyOfRange[i4] = (byte) (i5 - 76);
        }
        return new String(copyOfRange);
    }

    public static void A03() {
        A09 = new byte[]{-105, -33, -40, -22, -105, bx.l7, -36, -36, -27, -105, -32, -27, -21, -36, -23, -23, -20, -25, -21, -36, -37, -91, -63, -75, -5, -2, 1, -6, -75, -8, 1, -6, -10, 3, -6, -7, -49, -75, -125, 117, -106, -55, -55, -70, -62, -59, -55, -113, 117, -7, 23, 25, 30, 31, 36, 29, -42, 28, 31, 34, 27, -42, 25, 37, 35, 38, 34, 27, bx.W5, 27, 4, 34, 36, 41, bx.W5, 47, 40, bx.j7, 39, bx.W5, 45, 38, bx.j7, 47, 48, 53, bx.j7, 36, 48, 46, 49, 45, 38, 53, 38, bx.j7, -91, -61, -59, -54, -53, -48, -55, -126, -47, -56, -126, -32, -2, Flags.CD, -60, 17, -67, 0, 9, 12, 16, 2, -67, 0, -2, 0, 5, 2, -67, 3, 6, 9, 2, -53, -80, -50, -37, -108, bx.j7, -115, -33, -46, -50, -47, -115, -50, -32, -32, -46, bx.j7, -32, -101, -69, bx.l7, -26, -97, -20, -104, -22, -35, bx.l7, -36, -104, -28, -35, -26, -33, -20, -32, -104, -25, -34, -104, -72, bx.l7, -32, bx.l7, -24, -35, -30, -37, -108, -41, -43, -41, -36, bx.l7, -108, -38, -35, -32, bx.l7, -108, -43, -38, -24, bx.l7, -26, -108, bx.l7, -20, -41, bx.l7, bx.l7, -40, -35, -30, -37, -108, -26, bx.l7, -24, -26, -19, -108, -43, -24, -24, bx.l7, bx.j7, -28, -24, -25, -82, -108, -43, 2, 2, -1, 2, -80, -13, -15, -13, -8, -7, -2, -9, -80, 4, -8, -11, -80, -10, -7, -4, -11, -54, -9, -9, -12, -9, -91, -24, -15, -22, -26, -13, -18, -13, -20, -91, -21, -18, -15, -22, -72, -27, -27, -30, -27, -109, -42, -33, -30, -26, -36, bx.j7, -38, -109, -26, -30, -24, -27, -42, -40, -72, -35, -46, -34, -36, -33, -37, -44, -29, -44, -113, bx.j7, -44, -30, -33, -34, -35, -30, -44, -99, -65, -35, -28, -44, bx.l7, -46, -117, -33, -38, -117, -35, -48, -52, -49, -117, -73, -55, -55, -69, -54, -112, -123, -123, -123, -13, -10, -7, -14, -57, -68, -68, -68, -18, -5, -15, -1, -4, -10, -15, -20, -18, 0, 0, -14, 1, -68};
        String[] strArr = A0A;
        if (strArr[1].charAt(5) == strArr[3].charAt(5)) {
            throw new RuntimeException();
        }
        String[] strArr2 = A0A;
        strArr2[6] = "1YrvosXM8zHw8wsMUb3ulJ8Xgx5scBHO";
        strArr2[6] = "1YrvosXM8zHw8wsMUb3ulJ8Xgx5scBHO";
    }

    public static void A04() {
        A0A = new String[]{"2hmAfzTadn", "1uDqsMr9wv4o5ZghfCOZg4FuDp7sllqp", "nT1KYDstdBBAZ5nN", "UVqk4rMzzgqbiyaJgpoGMOUy0jQCoEBq", "ewXxsmpHr", "rT44HeCpkJQ", "C3kiv90mrVS0BL1BSM5Dfu9lHf0n3Csl", "grgxNBq6hb"};
    }

    static {
        A04();
        A03();
        A0B = C0938Qs.class.getSimpleName();
    }

    public C0938Qs(C8H c8h, AnonymousClass08 anonymousClass08, C0M c0m) {
        this.A05 = c8h;
        this.A08 = anonymousClass08.A02();
        this.A00 = anonymousClass08.A00();
        this.A04 = c0m;
        this.A01 = anonymousClass08.A01();
        this.A02 = anonymousClass08;
    }

    public static C0L A00(Context context, String str) throws C0I {
        try {
            InputStream open = context.getAssets().open(str);
            ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
            byte[] bArr = new byte[1024];
            while (true) {
                int read = open.read(bArr, 0, bArr.length);
                if (read != -1) {
                    byteArrayOutputStream.write(bArr, 0, read);
                } else {
                    return new C0940Qu(byteArrayOutputStream.toByteArray());
                }
            }
        } catch (IOException e) {
            throw new C0I(A02(WKSRecord.Service.CISCO_FNA, 18, 33), e);
        }
    }

    /* JADX WARN: Code restructure failed: missing block: B:37:0x00c8, code lost:
        r8 = r6.A04();
        r6.A07();
        r6 = java.lang.System.currentTimeMillis() - r13;
        r21.A00().A4B(r4, r16.A04);
        r16.A06.put(r10, r4);
        r16.A04.AC6(r10, 2112, null, java.lang.Integer.valueOf(r8), java.lang.Long.valueOf(r6), r17);
     */
    /* JADX WARN: Code restructure failed: missing block: B:38:0x00f3, code lost:
        return r4;
     */
    /* JADX WARN: Not initialized variable reg: 10, insn: 0x0100: INVOKE  
      (r9v0 ?? I:com.facebook.ads.redexgen.X.0M)
      (r10 I:java.lang.String)
      (r11 I:int)
      (r12 I:java.lang.String)
      (r13 I:java.lang.Integer)
      (r14 I:java.lang.Long)
      (r15 I:com.facebook.ads.redexgen.X.06)
     type: INTERFACE call: com.facebook.ads.redexgen.X.0M.AC6(java.lang.String, int, java.lang.String, java.lang.Integer, java.lang.Long, com.facebook.ads.redexgen.X.06):void, block:B:40:0x00f5 */
    /* JADX WARN: Not initialized variable reg: 10, insn: 0x011a: INVOKE  
      (r9v1 ?? I:com.facebook.ads.redexgen.X.0M)
      (r10 I:java.lang.String)
      (r11 I:int)
      (r12 I:java.lang.String)
      (r13 I:java.lang.Integer)
      (r14 I:java.lang.Long)
      (r15 I:com.facebook.ads.redexgen.X.06)
     type: INTERFACE call: com.facebook.ads.redexgen.X.0M.AC6(java.lang.String, int, java.lang.String, java.lang.Integer, java.lang.Long, com.facebook.ads.redexgen.X.06):void, block:B:46:0x010f */
    /* JADX WARN: Not initialized variable reg: 5, insn: 0x00ff: MOVE  (r15 I:??[OBJECT, ARRAY]) = (r5 I:??[OBJECT, ARRAY]), block:B:40:0x00f5 */
    /* JADX WARN: Not initialized variable reg: 5, insn: 0x0119: MOVE  (r15 I:??[OBJECT, ARRAY]) = (r5 I:??[OBJECT, ARRAY]), block:B:46:0x010f */
    @Nullable
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    private File A01(AnonymousClass06 anonymousClass06, String str, String str2, int i, AnonymousClass09 anonymousClass09) {
        AnonymousClass06 anonymousClass062;
        String AC6;
        AnonymousClass06 anonymousClass063;
        String AC62;
        C0942Qw c0942Qw;
        String A02 = A02(221, 22, 68);
        try {
            String str3 = str;
            long currentTimeMillis = System.currentTimeMillis();
            File file = new File(C0B.A00(this.A05), str2);
            C0942Qw c0942Qw2 = new C0942Qw(file, new C0651Fh(J8.A0K(this.A05)));
            if (c0942Qw2.A0A()) {
                if (this.A08) {
                    String str4 = A02(49, 21, 106) + c0942Qw2.A00.getName();
                }
                this.A06.put(str3, file);
                c0942Qw2.A07();
                this.A04.AC7(str3, true, anonymousClass06);
                return file;
            }
            if (this.A08) {
                String str5 = A02(70, 26, 117) + c0942Qw2.A00.getName();
            }
            if (!anonymousClass09.A04()) {
                return null;
            }
            int i2 = 0;
            this.A04.AC7(str3, false, anonymousClass06);
            while (true) {
                if (i2 < this.A00) {
                    try {
                        str3 = str3;
                        c0942Qw = c0942Qw2;
                        try {
                            A05(this.A05, c0942Qw2, str3, i, i2, currentTimeMillis);
                            break;
                        } catch (C0I e) {
                            e = e;
                            if (i2 == this.A00 - 1) {
                                A06(c0942Qw);
                                if (!(e instanceof C0941Qv)) {
                                    if (e instanceof C0944Qy) {
                                        throw ((C0944Qy) e);
                                    }
                                } else {
                                    throw ((C0941Qv) e);
                                }
                            }
                            i2++;
                            c0942Qw2 = c0942Qw;
                        }
                    } catch (C0I e2) {
                        e = e2;
                        c0942Qw = c0942Qw2;
                    }
                } else {
                    c0942Qw = c0942Qw2;
                    break;
                }
                i2++;
                c0942Qw2 = c0942Qw;
            }
        } catch (C0941Qv e3) {
            this.A04.AC6(AC62, 2119, e3.toString(), null, null, anonymousClass063);
            if (this.A08) {
                Log.e(A0B, A02, e3);
                return null;
            }
            return null;
        } catch (C0944Qy e4) {
            this.A04.AC6(AC6, 2113, e4.toString(), null, null, anonymousClass062);
            if (this.A08) {
                Log.e(A0B, A02, e4);
                return null;
            }
            return null;
        }
    }

    /* JADX WARN: Code restructure failed: missing block: B:87:0x01ad, code lost:
        if (r5 != false) goto L46;
     */
    /* JADX WARN: Code restructure failed: missing block: B:90:0x01b5, code lost:
        if (r5 != false) goto L46;
     */
    /* JADX WARN: Removed duplicated region for block: B:36:0x00fe A[Catch: all -> 0x0142, 0I -> 0x0144, TRY_LEAVE, TryCatch #15 {0I -> 0x0144, all -> 0x0142, blocks: (B:12:0x0079, B:36:0x00fe, B:42:0x0111, B:34:0x00f8, B:26:0x00b6, B:28:0x00be), top: B:98:0x0079 }] */
    /* JADX WARN: Removed duplicated region for block: B:37:0x0102 A[Catch: all -> 0x015a, 0I -> 0x015c, TRY_ENTER, TryCatch #13 {0I -> 0x015c, all -> 0x015a, blocks: (B:9:0x0051, B:15:0x0085, B:40:0x010b, B:43:0x0118, B:37:0x0102, B:39:0x0108, B:31:0x00ea, B:32:0x00f1), top: B:102:0x0051 }] */
    /* JADX WARN: Removed duplicated region for block: B:42:0x0111 A[Catch: all -> 0x0142, 0I -> 0x0144, TRY_ENTER, TRY_LEAVE, TryCatch #15 {0I -> 0x0144, all -> 0x0142, blocks: (B:12:0x0079, B:36:0x00fe, B:42:0x0111, B:34:0x00f8, B:26:0x00b6, B:28:0x00be), top: B:98:0x0079 }] */
    /* JADX WARN: Removed duplicated region for block: B:94:0x0165 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    private void A05(Context context, C0942Qw c0942Qw, String str, int i, int i2, long j) throws C0I {
        C0L source;
        StringBuilder sb;
        String A02 = A02(262, 20, 39);
        String A022 = A02(326, 22, 65);
        if (str.startsWith(A022)) {
            source = A00(context, str.substring(A022.length()));
        } else {
            String A023 = A02(aa.a.r, 9, 10);
            if (str.startsWith(A023)) {
                source = A00(context, str.substring(A023.length()));
            } else {
                source = new C0943Qx(str, i);
            }
        }
        try {
            if (this.A08) {
                try {
                    sb = new StringBuilder();
                    sb.append(A02(302, 15, 31));
                    sb.append(str);
                    sb.append(A02(38, 11, 9));
                } catch (C0I e) {
                    e = e;
                    int i3 = 0;
                    try {
                        if (source instanceof C0943Qx) {
                        }
                    } catch (Throwable th) {
                        th = th;
                    }
                    try {
                        this.A05.A04().A89(j, System.currentTimeMillis() - j, 0L, 0L, i3, null);
                        throw e;
                    } catch (Throwable th2) {
                        th = th2;
                        try {
                            source.close();
                        } catch (C0I | IllegalArgumentException e2) {
                            boolean z = this.A08;
                            String[] strArr = A0A;
                            if (strArr[5].length() != strArr[7].length()) {
                                String[] strArr2 = A0A;
                                strArr2[6] = "T9HhHUPHmRtDRYih6csTBmWckuigXZik";
                                strArr2[6] = "T9HhHUPHmRtDRYih6csTBmWckuigXZik";
                            }
                            Log.e(A0B, A02, e2);
                        }
                        throw th;
                    }
                } catch (Throwable th3) {
                    th = th3;
                    source.close();
                    throw th;
                }
                try {
                    sb.append(i2);
                    sb.toString();
                } catch (C0I e3) {
                    e = e3;
                    int i32 = 0;
                    if (source instanceof C0943Qx) {
                        try {
                            i32 = ((C0943Qx) source).A07();
                        } catch (Throwable th4) {
                            th = th4;
                            source.close();
                            throw th;
                        }
                    }
                    this.A05.A04().A89(j, System.currentTimeMillis() - j, 0L, 0L, i32, null);
                    throw e;
                } catch (Throwable th5) {
                    th = th5;
                    source.close();
                    throw th;
                }
            }
            int A04 = c0942Qw.A04();
            int length = source.length();
            if (A0A[2].length() != 16) {
                throw new RuntimeException();
            }
            String[] strArr3 = A0A;
            strArr3[1] = "eTbeym3Ey2TfwhNFyBG6ZkfAKtzQxWab";
            strArr3[3] = "sd4JUTjhNLXLgefrlj4RQDt9w4Pjz5Uj";
            boolean z2 = length < 0;
            if (z2) {
                boolean A07 = A07(c0942Qw);
                boolean cleaned = this.A08;
                if (cleaned) {
                    String str2 = A02(148, 21, 44) + str + A02(22, 16, 73) + A07;
                }
            }
            try {
                try {
                    if (z2 || A04 < length) {
                        source.ABQ(A04);
                        byte[] bArr = new byte[8192];
                        while (true) {
                            int read = source.read(bArr);
                            if (read != -1) {
                                c0942Qw.A09(bArr, read);
                            }
                        }
                        if (!z2) {
                            c0942Qw.A08();
                        } else if (c0942Qw.A04() == length) {
                            c0942Qw.A08();
                        } else {
                            throw new C0941Qv(A02(282, 20, 35));
                        }
                        int i4 = 0;
                        if (source instanceof C0943Qx) {
                            i4 = ((C0943Qx) source).A07();
                        }
                        InterfaceC04838h A042 = this.A05.A04();
                        long currentTimeMillis = System.currentTimeMillis() - j;
                        int code = c0942Qw.A04();
                        A042.A89(j, currentTimeMillis, code, 0L, i4, null);
                        source.close();
                        return;
                    }
                    source.close();
                    return;
                } catch (C0I | IllegalArgumentException e4) {
                    if (this.A08) {
                        Log.e(A0B, A02, e4);
                        return;
                    }
                    return;
                }
                if (!z2) {
                }
                int i42 = 0;
                if (source instanceof C0943Qx) {
                }
                InterfaceC04838h A0422 = this.A05.A04();
                long currentTimeMillis2 = System.currentTimeMillis() - j;
                int code2 = c0942Qw.A04();
                A0422.A89(j, currentTimeMillis2, code2, 0L, i42, null);
            } catch (C0I e5) {
                e = e5;
                int i322 = 0;
                if (source instanceof C0943Qx) {
                }
                this.A05.A04().A89(j, System.currentTimeMillis() - j, 0L, 0L, i322, null);
                throw e;
            } catch (Throwable th6) {
                th = th6;
                source.close();
                throw th;
            }
        } catch (C0I e6) {
            e = e6;
        } catch (Throwable th7) {
            th = th7;
        }
    }

    @SuppressLint({"CatchGeneralException"})
    private void A06(C0942Qw c0942Qw) {
        try {
            File A05 = c0942Qw.A05();
            if (A05.exists()) {
                c0942Qw.A07();
                boolean delete = A05.delete();
                if (this.A08) {
                    String str = A0B;
                    Log.i(str, A02(169, 52, 40) + delete);
                }
            }
        } catch (Exception e) {
            if (this.A08) {
                Log.e(A0B, A02(107, 23, 81), e);
            }
        }
    }

    private boolean A07(C0942Qw c0942Qw) {
        try {
            c0942Qw.A06();
            return true;
        } catch (C0944Qy e) {
            boolean z = this.A08;
            if (A0A[6].charAt(7) != 'U') {
                String[] strArr = A0A;
                strArr[6] = "AEs2mSbxTVyMZvMH4XlDgcN9VznTkYzp";
                strArr[6] = "AEs2mSbxTVyMZvMH4XlDgcN9VznTkYzp";
                if (z) {
                    Log.e(A0B, A02(WKSRecord.Service.SUR_MEAS, 19, 57), e);
                    return false;
                }
                return false;
            }
            throw new RuntimeException();
        }
    }

    /* JADX WARN: Generic types in debug info not equals: com.facebook.ads.redexgen.X.09 != com.facebook.ads.cache.config.CacheRequestConfig<T> */
    public final <T> AnonymousClass02<T> A08(AnonymousClass06 anonymousClass06, AnonymousClass09<T> anonymousClass09) {
        Semaphore semaphore;
        if (anonymousClass09.A03()) {
            File file = this.A06.get(anonymousClass06.A09);
            if (file != null) {
                C0M c0m = this.A04;
                String str = anonymousClass06.A09;
                if (A0A[6].charAt(7) != 'U') {
                    String[] strArr = A0A;
                    strArr[0] = "ARXa8ML4Mz";
                    strArr[4] = "7SNAJeIyn";
                    c0m.AC7(str, true, anonymousClass06);
                    return anonymousClass09.A00().A3E(file, this.A04);
                }
                throw new RuntimeException();
            }
            this.A04.AC7(anonymousClass06.A09, false, anonymousClass06);
            return new AnonymousClass02<>(false, null);
        }
        String str2 = anonymousClass06.A09;
        String str3 = this.A03.A03(str2) + anonymousClass06.A04;
        synchronized (this.A07) {
            semaphore = this.A07.get(str3);
            if (semaphore == null) {
                semaphore = new Semaphore(1);
                this.A07.put(str3, semaphore);
            }
            try {
            } catch (Throwable th) {
                semaphore.release();
                synchronized (this.A07) {
                    this.A07.remove(str3);
                    throw th;
                }
            }
        }
        try {
            semaphore.acquire();
            File A01 = A01(anonymousClass06, str2, str3, this.A01, anonymousClass09);
            if (A01 != null) {
                AnonymousClass02<T> A3E = anonymousClass09.A00().A3E(A01, this.A04);
                semaphore.release();
                synchronized (this.A07) {
                    this.A07.remove(str3);
                }
                return A3E;
            }
            AnonymousClass02<T> anonymousClass02 = new AnonymousClass02<>(false, null);
            semaphore.release();
            synchronized (this.A07) {
                this.A07.remove(str3);
            }
            return anonymousClass02;
        } catch (InterruptedException unused) {
            if (this.A08) {
                String str4 = A02(96, 11, 22) + str2 + A02(0, 22, 43);
            }
            AnonymousClass02<T> anonymousClass022 = new AnonymousClass02<>(false, null);
            semaphore.release();
            synchronized (this.A07) {
                this.A07.remove(str3);
                return anonymousClass022;
            }
        }
    }

    @Override // com.facebook.ads.redexgen.X.AnonymousClass00
    public final AnonymousClass02<Bitmap> ACX(AnonymousClass06 anonymousClass06, boolean z) {
        return A08(anonymousClass06, new AnonymousClass09(new C0936Qq(anonymousClass06.A01, anonymousClass06.A00, this.A02.A04(), this.A02.A03(), z)));
    }

    @Override // com.facebook.ads.redexgen.X.AnonymousClass00
    @Nullable
    public final String ACY(AnonymousClass06 anonymousClass06) {
        return (String) A08(anonymousClass06, new AnonymousClass09(new C0937Qr())).A00();
    }

    /* JADX WARN: Generic types in debug info not equals: com.facebook.ads.redexgen.X.09 != com.facebook.ads.cache.config.CacheRequestConfig<java.lang.String> */
    @Override // com.facebook.ads.redexgen.X.AnonymousClass00
    @Nullable
    public final String ACZ(AnonymousClass06 anonymousClass06) {
        AnonymousClass09 anonymousClass09 = new AnonymousClass09(new C0937Qr());
        anonymousClass09.A01(true);
        anonymousClass09.A02(false);
        return (String) A08(anonymousClass06, anonymousClass09).A00();
    }
}